" j138 .vimperatorrc

" Options
set history=1000
set activate=homepage,quickmark,tabopen,paste

" tabopen時の補完対象
set complete=tsl

set guioptions=mBr

" 検索時に大文字小文字を区別しない
set ignorecase

set wildoptions=auto

" 検索時にハイライト
set hlsearch
set visualbell

" ロード時にテキストボックスにフォーカスしない
set focuscontent

" タブ非表示
set showtabline=2

" leaderを変更
let mapleader = ","

colorscheme bigchu

" ステータスバーの背景色を変更
hi StatusLine color:black; background:#ABD31B; font-weight:normal;

" Mappings
noremap j 5<C-e>
noremap k 5<C-y>
noremap J <PageDown>
noremap K <PageUp>

" タブの移動
noremap h gT
noremap l gt
noremap <C-H> h
noremap <C-L> l

" undo
noremap U :undo<Space>

" 再起動
noremap <C-r> :restart<CR>

" ! でページのCSSをon/off
noremap ! :set invum<CR>

" ページのエンコーディングを変更
noremap ,es :set encoding=Shift_JIS<CR>
noremap ,ec :set encoding=EUC-JP<CR>
noremap ,eu :set encoding=UTF-8<CR>
noremap ,ei :set encodeing=ISO-2022-JP<CR>

" .vimperatorrcを再読み込み
noremap <leader>so :source ~/.vimperatorrc<CR>

" タブ位置の移動
map <C-h> :tabmove! -1<CR>
map <C-l> :tabmove! +1<CR>

" ブックマークの追加をトグル
noremap a          <S-a>

noremap <leader>m  :emenu 
noremap <leader>M  :emenu tool


" appendAnchor.js
let g:auto_append_anchor = "true"
let g:auto_append_anchor_once = "true"


" copy.js "{{{
map <leader>c :copy<Space>TitleAndbittly<CR>
map <leader>C :copy<Space>titleAndURL<CR>

js <<EOM
liberator.globalVariables.copy_templates = [
  { label: 'titleAndURL',     value: '%TITLE% %URL%' },
  { label: 'title \\n URL',   value: '%TITLE%\n%URL%' },
  { label: '[[title:URL]]',   value: '[[%TITLE%:%URL%]]' },
  { label: 'title',           value: '%TITLE%' },
  { label: 'url',             value: '%URL%' },
  { label: 'markdown',        value: '[%TITLE%](%URL% "%TITLE%")' },
  { label: 'htmlblockquote',  value: '<blockquote cite="%URL%" title="%TITLE%">%HTMLSEL%</blockquote>' },
  { label: 'bittly',          value: 'Get bittly URL', custom: function() { return util.httpGet('http://bit.ly/api?url=' + encodeURIComponent(buffer.URL)).responseText; }},
  { label: 'TitleAndbittly',  value: 'Get Title and bittly URL', custom: function() { return buffer.title + ' ' + util.httpGet('http://bit.ly/api?url=' + encodeURIComponent(buffer.URL)).responseText; }},
  { label: 'ASIN',            value: 'ASIN code from amazon', custom: function(){return content.document.getElementById('ASIN').value;} },
  { label: 'Amazon',          value: 'simple amazon url', custom: function(){return 'http://amazon.co.jp/o/ASIN/' + content.document.getElementById('ASIN').value;} },
  { label: 'AmazonAffiliate', value: 'simple amazon url with affiliate', custom: function(){return 'http://amazon.co.jp/o/ASIN/' + content.document.getElementById('ASIN').value + '/mt03-22';} },
];
EOM
" }}}

" direct_bookmark.js
let g:direct_sbm_use_services_by_tag = "hd"
let g:direct_sbm_use_services_by_post = "hd"
noremap <S-a>      :sbm<Space>[
noremap <Leader>be :bentry<CR>
noremap <Leader>bt :btags<CR>
noremap <Leader>bi :bicon<CR>


" feedsomekey_3.js {{{
command! -nargs=+ lazy autocmd VimperatorEnter .* <args>
lazy fmaps -u='mail\.google\.com/mail' c / j k n p o u e x s r a y # [ ] ? gi gs gt gd ga gc
lazy fmaps -u='mail\.google\.com/mail/.*/[0-9a-f]+$' c / j,n k,p n,j p,k o u e x s r a y # [ ] ? gi gs gt gd ga gc
lazy fmaps -u='www\.google\.(com|co\.jp)/reader' -events=vkeypress j k n p m s v A r S N P X O gh ga gs gt gu u / ? J K
lazy fmaps -u='(fastladder|livedoor)\.com/reader' j k s a p o v c i,p <Space> <S-Space> z b < > q w e,g
lazy fmaps -u='https?://www\.rememberthemilk\.com/home/' j k m i c ? t F,f G,g S,s L,l Y,y H,h M,m 1 2 3 4 5 <Del> <C-S-Left> <C-S-Right>
lazy fmaps -u='http://code.google.com/p/vimperator-labs/issues/list' o j k
lazy fmaps -u='http://code.google.com/p/vimperator-labs/issues/detail' u
" }}}


" localkeymode.js {{{
let g:localkeymode_enable = "true"

javascript <<EOM
  liberator.globalVariables.localKeyMappings= [
    [/www\.nicovideo\.jp\/watch/, [
        ['p', ':nicopause'],
        ['m', ':nicomute'],
        ['v', ':nicommentvisible'],
        ['s', ':nicoseek! +10'],
        ['S', ':nicoseek! -10'],
        ['z', ':nicosize'],
    ]],
    [/youtube\.com\/watch/, [
        ['p', ':ytpause'],
        ['m', ':ytmute'],
        ['z', ':ytsize'],
        ['s', ':ytseek! +10'],
        ['S', ':ytseek! -10'],
        ]],
    ];
EOM
" }}}


" ldrize_cooperation.js
noremap <silent> <Leader>q :toggleldrc<CR>


" sbmcommentsviewer.js
noremap <leader>bv :viewSBMComments<CR>


" toggle autopagerize
noremap <silent> <Leader>a :autopagerize<CR>


"tombloo.js
noremap <leader>to :tombloo<Space>
noremap <leader>d  :eijiro<Space>


" twitter.js
noremap <leader>tw :twitter<Space>
noremap <leader>tr :twitter!@<CR>
noremap <leader>ts :twitter!<Space>
noremap <leader>tu :twitter %TITLE% - %URL%<CR>
noremap <leader>te :twitter d myEN<Space>
noremap <leader>tm :twitter d rtm<Space>


" copy/paste {{{
javascript <<EOM
execute_silent = function(str, modifiers) {
    liberator.execute(str, modifiers, true);
}
if (liberator.has("Win32")) {
    execute_silent("cnoremap <C-a> <C-v><C-a>");
    execute_silent("cnoremap <C-z> <C-v><C-z>");
    execute_silent("cnoremap <C-x> <C-v><C-x>");
    execute_silent("cnoremap <C-c> <C-v><C-c>");
    execute_silent("cnoremap <C-v> <C-v><C-v>");
    execute_silent("inoremap <C-a> <C-v><C-a>");
    execute_silent("inoremap <C-z> <C-v><C-z>");
    execute_silent("inoremap <C-x> <C-v><C-x>");
    execute_silent("inoremap <C-c> <C-v><C-c>");
    execute_silent("inoremap <C-v> <C-v><C-v>");
}
else if (liberator.has("MacUnix")) {
    execute_silent("cnoremap <M-a> <C-v><M-a>");
    execute_silent("cnoremap <M-z> <C-v><M-z>");
    execute_silent("cnoremap <M-x> <C-v><M-x>");
    execute_silent("cnoremap <M-c> <C-v><M-c>");
    execute_silent("cnoremap <M-v> <C-v><M-v>");
    execute_silent("inoremap <M-a> <C-v><M-a>");
    execute_silent("inoremap <M-z> <C-v><M-z>");
    execute_silent("inoremap <M-x> <C-v><M-x>");
    execute_silent("inoremap <M-c> <C-v><M-c>");
    execute_silent("inoremap <M-v> <C-v><M-v>");
}
else {
}
EOM
" }}}


" RSSフィードの表示 {{{
javascript <<EOF
(function(){
  var feedPanel = document.createElement("statusbarpanel");
  feedPanel.setAttribute("id", "feed-panel-clone");
  feedPanel.appendChild(document.getElementById("feed-button"));
  feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
  document.getElementById("status-bar") .insertBefore(feedPanel, document.getElementById("security-button"));
}
)();
EOF
" }}}

" Toggle Autopagerize {{{
javascript <<EOM
let (evaluateXPath = util.evaluateXPath || buffer.evaluateXPath) {
    commands.addUserCommand(
            ['autopagerize'],
            'Toggle AutoPagerize',
            function (args) {
            buffer.followLink(
                evaluateXPath('id("autopagerize_help")/div/a[@class="autopagerize_link"]').snapshotItem(0)
                );
            },
            {},
            true
            );
}
EOM
" }}}

echo "done."

